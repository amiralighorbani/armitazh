<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Video</title>
    <link rel="icon" type="image/x-icon" href="/pic/setting.svg" />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.rtl.min.css"
      integrity="sha384-PJsj/BTMqILvmcej7ulplguok8ag4xFTPryRq8xevL7eBYSmpXKcbNVuy+P0RMgq"
      crossorigin="anonymous"
    />
    <link rel="stylesheet" href="/css/src/jalali.css" />
    <link rel="stylesheet" href="/css/setting style.css" />
    <link rel="stylesheet" href="/css/helper.css" />
  </head>
  <style>
    @font-face {
      font-family: "yekan";
      src: url("../font/Yekan.ttf");
    }

    * {
      font-family: "yekan";
      letter-spacing: 0;
    }

    #helper {
      background: linear-gradient(
          to bottom,
          rgba(0, 0, 0, 0.3) 0%,
          rgba(0, 0, 0, 0.7) 75%,
          #000 100%
        ),
        url("./../pic/armit.jpg");
      background-position: center;
      background-repeat: no-repeat;
      background-attachment: scroll;
      background-size: cover;
    }

    .front {
      will-change: transform;
      transition: transform 250ms;
    }

    .pushable:hover .front {
      transform: translateY(-6px);
    }

    .pushable:active .front {
      transform: translateY(-2px);
    }

    .helpee {
      border: none;
      background-color: black;
      color: aliceblue;
      border-radius: 10px;
      padding: 2px 14px;
    }

    .input-file {
      position: relative;
      display: inline-block;
    }

    .input-file-btn {
      position: relative;
      display: inline-block;
      cursor: pointer;
      outline: none;
      text-decoration: none;
      font-size: 14px;
      vertical-align: middle;
      color: rgb(255 255 255);
      text-align: center;
      border-radius: 4px;
      background-color: #419152;
      line-height: 22px;
      height: 40px;
      padding: 10px 20px;
      box-sizing: border-box;
      border: none;
      margin: 0;
      transition: background-color 0.2s;
    }

    .input-file-text {
      padding: 0 10px;
      line-height: 40px;
      display: inline-block;
    }

    .input-file input[type="file"] {
      position: absolute;
      z-index: -1;
      opacity: 0;
      display: block;
      width: 0;
      height: 0;
    }

    /* Focus */
    .input-file input[type="file"]:focus + .input-file-btn {
      box-shadow: 0 0 0 0.2rem rgba(0, 123, 255, 0.25);
    }

    /* Hover/active */
    .input-file:hover .input-file-btn {
      background-color: #59be6e;
    }

    .input-file:active .input-file-btn {
      background-color: #2e703a;
    }

    /* Disabled */
    .input-file input[type="file"]:disabled + .input-file-btn {
      background-color: #eee;
    }
     .container {
        display: flex;
    }

     .item {
        flex: 1;
        box-sizing: border-box;
    }
  </style>

  <body dir="rtl">
    <div class="container-fluid" id="helper">
      <nav class="navbar navbar-expand-lg" style="background-color: #0b1a2a">
        <div class="container px-4 px-lg-5">
          <a class="navbar-brand" href="#" style="color: aliceblue">
            <button id="save" class="pushable">
              <span class="front">آپدیت لحظه ای</span>
            </button>
          </a>
          <button
            class="navbar-toggler"
            type="button"
            data-bs-toggle="collapse"
            data-bs-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent"
            aria-expanded="false"
            aria-label="Toggle navigation"
          >
            <span class="navbar-toggler-icon"></span>
          </button>

          <div
            class="collapse navbar-collapse"
            id="navbarSupportedContent"
            style="position: absolute; left: 100px"
          >
            <ul class="navbar-nav me-auto mb-2 mb-lg-0 ms-lg-4">
              <li class="nav-item">
                <a
                  class="nav-link active"
                  aria-current="page"
                  href="/tv"
                  style="color: aliceblue"
                  >صفحه اصلی</a
                >
              </li>
              <li class="nav-item">
                <a class="nav-link" href="/settings" style="color: aliceblue"
                  >تنظیمات</a
                >
              </li>
              <li class="nav-item">
                <a
                  class="nav-link"
                  href="/tv/b8:27:eb:cd:6d:94"
                  id="first"
                  style="color: aliceblue"
                  >تلویزیون</a
                >
              </li>
              <li class="nav-item">
                <a
                  class="nav-link"
                  href="/category"
                  id="first"
                  style="color: aliceblue"
                  >دسته بندی</a
                >
              </li>
              <li class="nav-item">
                <a
                  class="nav-link"
                  href="/video"
                  id="first"
                  style="color: aliceblue"
                  >ویدیو ها</a
                >
              </li>
              <li class="nav-item">
                <a
                  class="nav-link"
                  href="/view"
                  id="first"
                  style="color: aliceblue"
                  >آمار</a
                >
              </li>
              <li class="nav-item">
                <a
                  class="nav-link ml-auto"
                  href="/api/logout"
                  style="color: aliceblue"
                  >خروج</a
                >
              </li>
            </ul>
          </div>
        </div>
      </nav>

      <div class="row justify-content-center mt-5">
        <div class="col-8 accordion" id="accordionContainer">
        </div>
      </div>

      <hr />
      <hr />
      <hr />
      <hr />
      <hr />
      <hr />
      <hr />
      <hr />
      <hr />
      <hr />
      <hr />
      <hr />
      <hr />
      <hr />
      <hr />
      <hr />
      <hr />
      <hr />
      <hr />
      <hr />
      <hr />
      <hr />
      <hr />
      <hr />
      <hr />
      <hr />
      <hr />
      <hr />
      <hr />
      <hr />

      <!-- error section -->
      <footer class="py-5 bg-dark" style="width: 100.5%">
        <div class="container">
          <p class="m-0 text-center text-white">
            Copyright &copy; Your Website 2023
          </p>
        </div>
      </footer>
    </div>

    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-geWF76RCwLtnZ8qwWowPQNguL3RmwHVBC9FhGdlKrxdiJJigb/j/68SIy3Te4Bkz"
      crossorigin="anonymous"
    ></script>
    <script type="text/javascript" src="/js/src/jalaliData.js"></script>
    <script src="/js/src/jalali.js"></script>
    <script src="/socket.io/socket.io.js"></script>
    <script>
      var socket = io();
    </script>
    <script>
      jalaliDatepicker.startWatch();
    </script>
    <script>
        var socket = io();
        socket.emit("getGroup")
        socket.on('jsonFile',data =>{
            const accordionContainer = document.getElementById("accordionContainer")
            //console.log(accordionContainer)
            //console.log(data)
            data["videosDescriptions"].forEach(vid=>{
                accordionContainer.innerHTML += `
                    <div class="accordion-item">
                        <h2 class="accordion-header">
                        <button
                            class="accordion-button collapsed"
                            type="button"
                            data-bs-toggle="collapse"
                            data-bs-target="#${vid.name}"
                        >
                            ${vid.title}
                        </button>
                        </h2>
                        <div
                        id="${vid.name}"
                        class="accordion-collapse collapse m-0"
                        data-bs-parent="#accordionContainer"
                        >
                        <div class="accordion-body">
                            <div id="days-container">
                                <h4>تعداد پخش ویدیوی ${vid.name}</h4>
                                <hr>
                            <div class="container">
                                <div class="item">روز:${vid.day}</div>
                                <div class="item">هفته:${vid.week}</div>
                                <div class="item">ماه:${vid.month}</div>
                                <div class="item">کل:${vid.total}</div>
                            </div>
                            </div>
                        </div>
                        </div>
                    </div>
                `
            })
        })
    </script>
    <script>
      const save = document.querySelector('#save')
      save.addEventListener('click', () =>{
        fetch("http://localhost:8010/update")
        location.reload()
      })
    </script>
  </body>
</html>
